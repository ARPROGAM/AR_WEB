<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ARZU</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Model-viewer with the link to the GLB model -->
    <model-viewer id="ar-model" 
                  src="https://drive.google.com/uc?export=download&id=1EECUjL9qTHMCvpgTfpE_uIqahfoE4d0e" 
                  alt="3D Model" 
                  ar 
                  ar-modes="scene-viewer webxr quick-look" 
                  environment-image="neutral" 
                  disable-zoom>
    </model-viewer>

    <!-- Joystick container -->
    <div id="joystickContainer">
        <canvas id="joystick" width="150" height="150"></canvas>
    </div>

    <!-- Scripts -->
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/nipplejs/0.8.3/nipplejs.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const modelViewer = document.getElementById('ar-model');
            
            // Initialize the joystick
            const joystick = nipplejs.create({
                zone: document.getElementById('joystickContainer'),
                mode: 'dynamic',
                position: { left: '50%', top: '50%' },
                color: 'blue',
                size: 100,
                multitouch: true
            });

            // Function to enter AR mode automatically
            function enterAR() {
                if (modelViewer) {
                    modelViewer.enterAR(); // This function should trigger AR mode if supported
                }
            }

            // Wait for the model-viewer to be ready
            modelViewer.addEventListener('load', () => {
                // Check if AR is available and then trigger it
                if (modelViewer.canEnterAR) {
                    enterAR();
                }
            });

            // Handle joystick movements
            joystick.on('move', (evt, data) => {
                // Joystick logic here; note: model-viewer does not provide direct API for camera control
                // Therefore, you might need to implement custom logic or switch to a framework like A-Frame
                console.log('Joystick direction:', data.direction.angle, 'Distance:', data.distance);
            });

            // Handle joystick release (stop movement)
            joystick.on('end', () => {
                // Handle joystick end event
            });
        });
    </script>
</body>
</html>
